# Changelog

## v1.15.2 - 2025-05-07

### Changed
- Улучшен процесс поиска логов, если всеми заданными ранее способами не удалось найти лог, то приложение начинает искать последний изменённый файл с расширением `.log`.
- Расширено описание кодов ошибок в планировщике заданий.

## v1.15.1 - 2025-05-06

### Fixed
- Исправлена работа фильтров на вкладке "Процессы". Ранее фильтр по директории вообще не работал.

## v1.15.0 — 2025-04-26

### Added
- На вкладку **"Задачи"** добавлена кнопка **"Объясни код"**.  
  По нажатию код R-скрипта, связанного с выбранной задачей планировщика, отправляется в Gemini AI для анализа.  
  Результат выводится на новой вкладке **"Анализ кода"** в формате подробного объяснения логики скрипта.

## v1.14.0 — 2025-04-25

### Added
- На вкладку **"Задачи"** добавлена кнопка **"Код"** для просмотра листинга скрипта, запускаемого выбранной задачей.
- Проведено дополнительное обучение модели, используемой в чатах и при анализе `.Rout` файлов:
  - Добавлена расширенная информация о пакете **n1**:
    - Описание статусов сотрудников.
    - Описание всех аргументов всех функций.
  - Обновлены описания пакетов **`rpup`** и **`n1`**:
    - Добавлены списки названий компаний для корректной фильтрации.
  - Добавлена информация по работе с Python-пакетом **`alspy`** и классом **`PyPup`**:
    - Описания всех методов класса.
    - Описания всех аргументов методов.
    - Описания основных полей возвращаемых данных.
    - Инструкция по применению класса **PyPup** в различных сценариях.
  - В модель добавлено описание общей концепции и принципов нашей разработки.

### Changed
- У приложения обновлён favicon.
- При отправке `.Rout` файлов на анализ теперь передаются только последние 30 000 символов, чтобы оптимизировать скорость обработки и избежать перегрузки модели избыточной информацией.

## v1.13.0 — 2025-04-19

### Added

- Добавлена вкладка "AI разработка" — интерфейс к AI-модели Gemini, позволяющий генерировать R-код с использованием внутренних пакетов:
  - rpup
  - n1
  - pfworker
  - serviceaccounts
  - segments
- Встроенная в приложение AI-модель дообучена:
  - Загружено описание всех внутренних функций, включая:
    - Все аргументы каждой функции
    - Перечень таблиц базы данных, к которым обращается функция
    - Описание всех полей, которые функция возвращает
- На вкладку README добавлен видео мануал.

## v1.12.1 — 2025-04-18

### Added

- При запуске приложения для анализа Rout логов теперь создаётся диалог с Gemini AI в который загружается базовая документация к внутренним пакетам: rpup, pfworker, n1, serviceaccounts, segments. Далее эта информация используется при отправке Rout файлов на анализ через AI.

## v1.12.0 — 2025-04-18

### Added

- На вкладку "Задачи" добавлена кнопка "Анализ Rout", по нажатию на которую Rout файл по выбранной задаче отправляется на анализ Gemini AI. В результате вы получите рекомендации с пошаговым планом по исправлению ошибки в упавшем скрипте.

## v1.11.0 — 2025-04-12

### Added

- На вкладку "Задачи" добавлена кнопка "Выгрузить в Google Sheets", по нажатию на которую отфильтрованный список задач выгружается в докс, и появляется кнопка открыть задачи в Google Sheets.

## v1.10.4 — 2025-04-10

### Changed

- Улучшен процесс поиска логов:
  - Если ряд скриптов запускаются из одного bat файла будут выведены логи по каждому Rout файлу, при этом сначала в лог выводятся все Rout файлы и время их последнего изменения.
  - Загружаются логи даже если скрипты запускаются из ps1 файла.

## v1.10.3 — 2025-04-10

### Added

- В приложение добавлена новая роль пользователя viewer. У пользователей в данной роли нет доступа к вкладкам:
  - CMD
  - Процессы
  - Поиск по файлам
  - Доступы
  - На вкладке Задачи нет кнопки запуска задач.
  - На вкладке Службы нет кнопок управления службами.

## v1.10.2 — 2025-04-10

### Changed

- Доработан интерфейс вкладки Процессы:
  - Добавлены фильтры по полям имя процесса и клиент.
  - В таблице процессов добавлены фильтры под каждое поле.
  - Все фильтры теперь взаимосвязаны, т.е. при выборе значения в одном, изменяются список доступных значений в остальных фильтрах.

### Fixed

- Исправлено вычисления поля client в таблице процессов.

## v1.10.1 — 2025-04-10

### Added

- Отображение пользовательского экрана загрузки (через waiter) в процессе запуска приложения и обновления данных.

## v1.10.0 — 2025-04-10

### Added

- Вкладка Процессы с возможностью отслеживания и остановки процессов на сервере.
- Новый модуль mod_tab_processes.

## v1.9.6 — 2025-04-09

### Added

- Вкладки README и NEWS для отображения технической документации в интерфейсе.

## v1.9.5 — 2025-04-09

### Changed

- Вынесен код вкладки Задачи в модуль mod_tab_tasks.

## v1.9.4 — 2025-04-09

### Changed

- Вкладка Поиск по файлам вынесена в модуль mod_tab_find_in_files.

## v1.9.3 — 2025-04-09

### Changed

- Кнопка Выйти перемещена вверх, добавлена иконка и цвет danger.
- Галочка "Светлая тема" заменена на кнопку с иконкой луны/солнца.
- Кнопка Обновить данные теперь жёлтого цвета.

## v1.9.2 — 2025-04-09

### Changed

- Вкладка Службы вынесена в модуль mod_tab_services.

## v1.9.1 — 2025-04-09

### Fixed

- Улучшена обработка логов для задач с .bat файлами (чтение из файла).

## v1.9.0 — 2025-04-08

### Added

- Модуль управления пользователями (виден только admin).
- Возможность добавления, удаления и редактирования ролей и паролей.
- Достигнута первая стабильная версия.

## v1.8 — 2025-04-08

### Added

- Расшифровка статусов задач и кодов ошибок из планировщика для более понятного отображения информации о задачах.

## v1.7 — 2025-04-07

### Added

- Кнопка README на вкладке "Задачи" для рендеринга и отображения содержимого README.md файла проекта.
- Вкладка "Поиск по файлам" для поиска файлов по тексту во всех директориях, где находятся скрипты.
- Интерфейс командной строки для выполнения команд на сервере.
- Общая информация по задаче под выпадающим списком в интерфейсе задач.

### Changed

- Увеличена ширина поля с выбором задачи для удобства использования.
- Перемещены кнопка "Обновить данные" и элемент управления темой для улучшения интерфейса.
- Функционал поиска по файлам теперь отображает полный путь к файлу в поле file.
- Функции из файла app.R вынесены в каталог R.
- Модуль авторизации вынесен из app.R в отдельный модуль.

## v1.6 — 2025-04-07

### Added

- Вкладка "Поиск по файлам" для поиска файлов по тексту во всех директориях, где находятся скрипты.

### Changed

- Увеличена ширина поля с выбором задачи.

## v1.5 — 2025-04-06

### Added

- Интерфейс командной строки для выполнения команд на сервере.

### Changed

- Улучшена логика работы интерфейса командной строки.

## v1.4 — 2025-04-06

### Added

- Дополнительная информация о службах: директория запуска, клиент, команда.
- Favicon для приложения.
- Окно авторизации с поддержкой тёмной темы.

### Changed

- Улучшена логика отклика нажатия кнопок для повышения производительности.
- Оптимизирована работа окна авторизации.

## v1.3 — 2025-04-06

### Added

- Авторизация по логину и паролю для доступа к приложению.

### Changed

- Оптимизирована логика отклика нажатия кнопок.

## v1.2 — 2025-04-06

### Added

- Вкладка "Статистика" с информацией о задачах в разрезе пользователей и клиентов.
- Два графика на вкладке "Статистика":
  - График количества сбоев по задачам за последние 90 дней.
  - График количества настроенных кронов на сервере.
- Процесс авторизации по логину и паролю.

## v1.1 — 2025-04-06

### Changed

- Исправлена логика определения поля Client для задач, исключая ошибки при работе со старой файловой структурой.

## v1.0 — 2025-04-06

### Added

- Первый релиз Server Task & Service Manager Shiny App.
- Интерфейс разделён на две вкладки:
  - "Задачи" — управление задачами в планировщике Windows.
  - "Службы" — управление службами на сервере.
- Возможности:
  - Просмотр списка задач с фильтрацией по автору и статусу последнего запуска.
  - Запуск выбранной задачи.
  - Мониторинг статуса служб.
  - Запуск, остановка и перезапуск служб.
  - Запрос логов задач.
  - Отображение информации о клиенте, связанном со скриптом.
- Тёмная тема интерфейса.
- Кнопка "Обновить данные" для актуализации информации.
- Блок вывода логов.

### Changed

- Оптимизирована загрузка данных по задачам (с 4 запросов до 1 при старте).
- Изменено расположение блоков интерфейса для удобства использования.
