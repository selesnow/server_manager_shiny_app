
# работа с пакетом pfworker

Внутренний R пакет предназначенный для работы с ПФWorker, т.е. позволяет запрашиваьт данные из Планфикса, а также создавать в Планфикс задачи по API.



## Подробное описание

Пакет `pfworker` является R интерфейсом для работы с API Планфикс. Функции пакета позволяют как запрашивать некотрую информацию из API, так и ставить задачи в Планфикс. 
pfworker - это API сервис который является промежуточным звеном между нами и API Планфикс.

### Начало работы

Для работы с API Планфикс необходим авторизационный токен. Токен аналитиков хранится на сервере в системной переменной `PFW_TOKEN`, и по умолчанию доступен всем пользователя сервера, в связи с чем никакой дополнительной настройки от пользователей не требуется.

Запасным способом передачи токена в функции пакета является использование опции `pfw_token`. Но, не рекомендуется сохранять токен в коде. 

```{r}
options(pfw_token = "ваш токен")
```

### Список функций пакета

* Создание объектов в Планфикс:
  * `pfw_create_task()` - Создание задач в ПланФикс
* Работа с отчётами в Планфикс:
  * `pfw_get_report_list()` - Запрос списка созданных в Планфикс отчётов
  * `pfw_get_report()` - Получить метаданные отчёта
  * `pfw_get_report_save_list()` - Получить список сохранённых результатов отчёта из Планфикс
  * `pfw_get_report_data()` - Получить данные отчёта
* Запрос прочей информации из Планфикс:
  * `pfw_get_tasks()` - Получить данные по задачам
  * `pfw_get_task_custom_data()` - Получить кастомные поля по задачам
  * `pfw_get_tasks_analytics()` - Получить аналитики по задачам
  * `pfw_get_users()` - Информация по пользователям Планфикс
  * `pfw_get_contacts()` - Получить список контактов
  * `pfw_get_status_set()` - Запросить справочник процессы
  * `pfw_get_statuses_of_set()` - Получить набрры статусов по процессам
  * `pfw_get_usergroups()` - Получить группы в которых состоят пользователи Планфикс
  * `pfw_get_project_data()` - Получить данные по проекту
  * `pfw_get_analityc_data()` - Получить данные по аналитике
  * `pfw_get_action()` - Получить информацию по событию
  * `pfw_get_action_at_date()` - Получить события совершенные в определённую дату
  * `pfw_get_analitycs()` - Получить справочник аналитик
  * `pfw_get_analytics_fields()` - Получить данные по конкретному полю аналитики
  * `pfw_get_projects()` - Получить справочник проектов
  * `pfw_get_task_change_at()` - Получить список задач изменённых в указанные даты

### Постоновка задач через пакет pfworker
Для постановки задач используйте функцию `pfw_get_tasks()`, и её аргументы.

Пример:
```{r}
library(pfworker)

# токен
# только в случае если он не установлен через переменную среды
options(pfw_token = "ваш токен")

# ставим задачц
pfw_create_task(
  title = "Название задачи",
  description = "Тело задачи", 
  owner = 1, # planfix id постановщика задачи
  workersIds = c(5, 6, 7), # planfix id исполнителей
  endDate = Sys.Date() + 7, # дата дедлайна
  )
```

### Вопросы по пакету `pfworker`
Все вопросы по работе с пакетом `pfworker` направлять к [Alsey](https://t.me/AlexeySeleznev).
